\subsection{Client zur Datenanalyse}
Der Client ist in Python implementiert, da zum Zeitpunkt, als die Probleme in der Adafruit BLE Library bekannt wurden, bereits große Teile des Clients implementiert waren.
\subsubsection{Graphisches User Interface}
Für die Darstellung graphischer Bedienelemente im Client, wurde die Library PyQt4 verwendet, die eine leichte Integration der Graphen der Sensordaten ermöglicht. Diese werden durch eine weitere Bibliothek erzeugt, können aber durch sogenannte Widgets in die GUI geladen werden.
Da keine Echtzeitübertragung möglich ist, werden nur wenige Bedienelemente, welche in einer Menuleiste untergebracht sind, benötigt:
\begin{itemize}
\item Öffnen einer Testdatei
\item Anzeigen von Statistiken über den Testlauf (Dauer des Testlaufs, gemessene minimal und maximal Werte)
\item Zusammenfügen von Dateien, wenn ein Testlauf in verschiedenen Dateien gespeichert ist
\item Parametrisieren des Filters
\end{itemize}
\subsubsection{Datenformat}
Um alle weiteren Verarbeitungsschritte zu erleichtern wird ein einfaches Datenformat verwendet.
%TODO include Bild
\subsubsection{Parser}
Der Parser operiert auf oben beschriebenen Datenformat und hat zwei Hauptaufgaben:
\begin{itemize}
 \item Bereinigen der Daten, falls unvollständige, oder inkorrekte Tupel ankommen
 \item Aufteilen der Daten in Arrays, welche dann als Graph dargestellt werden können
\end{itemize}
Durch Eingabe einer Datendatei werden sechs Listen erzeugt, welche zur Darstellung and die Klasse Plotter übergeben werden.
\subsubsection{Darstellen von Daten}
Das Darstellen der Daten erfolgt in der Klasse Plotter, welche die Module numpy und pyqtgraph verwendet. Durch letzteres wird ein PlotWidget erzeugt, welches genau einen Graphen beinhaltet, der entweder die Werte der drei Achsen des Gyroskops oder des Beschleunigungssensors darstellt.
Ein PlotWidget enthält ein PlotItem welches eine Menge von PlotDataItems enthält, d.h. eine Menge von gemessenen Datenpunkten.
%TODO include bild eines Graphen
\subsubsection{Datenaufbereitung}
Durch verschiedene äußere Bedingungen (z.B. Empfindlichkeit des Sensors oder Vibration der Bahn) werden die gemessenen Rohdaten verfälscht. Durch Anwendung von Filtern, können die Daten verbessert werden.
Hierbei wurden zwei Ansätze analysiert, aber nur einer implementiert:
\begin{enumerate}
\item Savitzky-Golay-Filter
\item Kalman-Filter
\end{enumerate}
\paragraph{Savitzky-Golay-Filter}
Das Savitzky-Golay-Filter ist ein einfaches Glättungsfilter, bei dem auf die Daten der Kurve innerhalb eines Fensters eine polynomiale Regression angewandt wird. Das Filter hat gute Eigenschaften, wenn es um die relative Verteilung von Maxima und Minima geht. Es ist wahrscheinlich, dass durch die Empfindlichkeit der Sensoren bereits kleinste Vibrationen der Bahn aufgezeichnet werden. Diese geben jedoch kaum Aufschluss, in welchem Abschnitt der Sortieranlage sich das Schüttgut derzeit befindet. Größere Bewegungen, die auch in größeren Ausschlägen in den Sensoren resultiern, sind dafür besser geeignet. Insofern ist der Erhalt der Maxima und Minima von Nutzen.
Die Parameter, die bei diesem Filter verändert werden können, sind die Fensterbreite und der Grad des Polynoms. Je größer das Fenster und desto niedriger der Grad, desto mehr wird die Kurve effektiv gedämpft.
\paragraph{Kalman-Filter}
Das Kalman-Filter zieht im Gegensatz zum Savitzky-Golay-Filter zwei verschiedene Arten von Rauschen in betracht:
\begin{itemize}
\item Prozessrauschen 
\item Sensorrauschen
\end{itemize}
Jedoch ist die Wahl und Beschreibung des zu Grunde liegenden Systems entscheidend für die Parameterwahl. Ist das System nur unzureichend bekannt und wird deshalb schlecht beschrieben, ist der Filter nicht mehr als ein Tiefpass und wird keine guten Ergebnisse liefern. Da in unserem Fall die Erfahrung in der Anwendung eines solchen Filters fehlt, wurde dieser Ansatz bereits nach kurzer Zeit verworfen.
Die Wahl der Parameter ist beim Einsatz von Filtern entscheidend. Diese haben großen Einfluss auf die Form des resultierenden Graphen. Das macht sie aber auch besonders problematisch, da sie meist nur experimentell ermittelt werden können und unklar bleibt, wie weit die Graphen tatsächlich geglättet werden müssen, um ein verwertbares Ergebnis zu erhalten. 